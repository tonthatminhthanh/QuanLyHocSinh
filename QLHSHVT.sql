GO
CREATE DATABASE QLHSHVT
GO

USE QLHSHVT;

CREATE TABLE THAMSO
(
	MaThamSo VARCHAR(4) PRIMARY KEY,
	HocPhiToiThieu INT NOT NULL,
	HocPhiToiDa INT NOT NULL
)

CREATE TABLE GIAOVIEN
(
	MaGV VARCHAR(4) PRIMARY KEY,
	HoGV NVARCHAR(50) NOT NULL,
	TenGV NVARCHAR(50) NOT NULL,
	GioiTinh BIT NOT NULL,
)

INSERT INTO GIAOVIEN VALUES('GV01',N'Nguyễn Huy','Hoàn',1)
INSERT INTO GIAOVIEN VALUES('GV02', N'Nguyễn Thị', N'Thảo', 0)
INSERT INTO GIAOVIEN VALUES('GV03', N'Nguyễn Đình', N'Thắng', 1)
INSERT INTO GIAOVIEN VALUES('GV04', N'Lê Hồng', N'Sơn', 1)
INSERT INTO GIAOVIEN VALUES('GV05', N'Phạm Thanh', N'Hương', 0)
INSERT INTO GIAOVIEN VALUES('GV06', N'Trần Văn', N'Tâm', 1)
INSERT INTO GIAOVIEN VALUES('GV07', N'Ngô Thị', N'Hồng', 0)
INSERT INTO GIAOVIEN VALUES('GV08', N'Lê Minh', N'Thành', 1)
INSERT INTO GIAOVIEN VALUES('GV09', N'Đặng Hoàng', N'Sơn', 1)
INSERT INTO GIAOVIEN VALUES('GV10', N'Võ Thị', N'Anh', 0)

CREATE TABLE NGANH
(
	MaNganh VARCHAR(4) PRIMARY KEY,
	TenNganh NVARCHAR(15) NOT NULL
)

CREATE TABLE KHOI
(
	MaKhoi VARCHAR(1) PRIMARY KEY,
	TenKhoi NVARCHAR(10) NOT NULL
)

INSERT INTO KHOI VALUES('A','Khối A')
INSERT INTO KHOI VALUES('B','Khối B')
INSERT INTO KHOI VALUES('C','Khối C')

CREATE TABLE LOP
(
	MaLop VARCHAR(2) PRIMARY KEY,
	MaNganh VARCHAR(4) NOT NULL,
	MaGVCN VARCHAR(4) REFERENCES GIAOVIEN(MaGV)
)

INSERT INTO LOP(MaLop,MaNganh) VALUES('A1','A') 
INSERT INTO LOP(MaLop,MaNganh) VALUES('A2','A')
INSERT INTO LOP(MaLop,MaNganh) VALUES('B1','B') 
INSERT INTO LOP(MaLop,MaNganh) VALUES('B2','B') 
INSERT INTO LOP(MaLop,MaNganh) VALUES('C1','C')
INSERT INTO LOP(MaLop,MaNganh) VALUES('C2','C') 

CREATE TABLE PHUHUYNH
(
	MaPH VARCHAR(6) PRIMARY KEY,
	HoPH NVARCHAR(50) NOT NULL,
	TenPH NVARCHAR(25) NOT NULL,
	SDT VARCHAR(10) NOT NULL,
	Email VARCHAR(100) NOT NULL,
	NgheNghiep NVARCHAR(25) NOT NULL
)

INSERT INTO PHUHUYNH VALUES('PH0001','Nguyen Thi','Quy','0123456789','ntq1955@gmail.com','Noi tro') 

CREATE TABLE TONGIAO 
(
	MaTonGiao VARCHAR(4) PRIMARY KEY,
	TenTonGiao NVARCHAR(100) NOT NULL
)

INSERT INTO TONGIAO (MaTonGiao, TenTonGiao)
VALUES 
	('TG01', N'Phật giáo'),
	('TG02', N'Tin Lành'),
	('TG03', N'Công giáo'),
	('TG04', N'Hòa Hảo'),
	('TG05', N'Hồi giáo'),
	('TG06', N'Đạo Bửu Sơn Kỳ Hương'),
	('TG07', N'Đạo Tứ Ân Hiếu Nghĩa'),
	('TG08', N'Đạo Minh Đạo'),
	('TG09', N'Đạo Đức Giáo');

CREATE TABLE QUOCTICH
(
	MaQuocTich VARCHAR(5) PRIMARY KEY,
	TenQuocTich NVARCHAR(100) NOT NULL
)

INSERT INTO QUOCTICH (MaQuocTich, TenQuocTich)
VALUES 
	('QT001', N'Việt Nam'),
	('QT002', N'Thái Lan'),
	('QT003', N'Philippines'),
	('QT004', N'Malaysia'),
	('QT005', N'Indonesia'),
	('QT006', N'Singapore'),
	('QT007', N'Myanmar'),
	('QT008', N'Lào'),
	('QT009', N'Campuchia'),
	('QT010', N'Đông Timor');

CREATE TABLE HOCSINH
(
	MaHS VARCHAR(8) PRIMARY KEY,
	HoHS NVARCHAR(50) NOT NULL,
	TenHS NVARCHAR(50) NOT NULL,
	AnhHS NVARCHAR(100) NOT NULL,
	GioiTinh BIT NOT NULL,
	MaLop VARCHAR(2) REFERENCES LOP(MaLop) NOT NULL,
	MaPH VARCHAR(6) REFERENCES PHUHUYNH(MaPH) NOT NULL,
	NgaySinh DATE NOT NULL,
	SDT VARCHAR(10),
	Email VARCHAR(100),
	DiaChi NVARCHAR(100) NOT NULL,
	QueQuan NVARCHAR(100) NOT NULL,
	MaTonGiao VARCHAR(4) REFERENCES TONGIAO(MaTonGiao) NOT NULL,
	MaQuocTich VARCHAR(5) REFERENCES QUOCTICH(MaQuocTich) NOT NULL
)

INSERT INTO HOCSINH VALUES('HS000001','Ton That Minh','Thanh','placeholder.png',1,'A1','PH0001','20020210','0325578154','thanh.ttm.62cntt@ntu.edu.vn','415/1 duong 2 thang 4','Dien Khanh','TG01','QT001') 

CREATE TABLE MONHOC
(
	MaMH VARCHAR(5) PRIMARY KEY,
	TenMH NVARCHAR(25) NOT NULL,
	MaNganh VARCHAR(4) REFERENCES NGANH(MaNganh) NOT NULL,
	MaKhoi VARCHAR(1) REFERENCES KHOI(MaKhoi) NOT NULL
)

INSERT INTO NGANH VALUES('STEM',N'KH tự nhiên')
INSERT INTO MONHOC VALUES('TOANA',N'Toán A','STEM','A')
INSERT INTO MONHOC VALUES('TOANB',N'Toán B','STEM','B')
INSERT INTO MONHOC VALUES('TOANC',N'Toán C','STEM','C')
INSERT INTO MONHOC VALUES('PHYSA',N'Vật lý A','STEM','A')
INSERT INTO MONHOC VALUES('PHYSB',N'Vật lý B','STEM','B')
INSERT INTO MONHOC VALUES('PHYSC',N'Vật lý C','STEM','C')
INSERT INTO MONHOC VALUES('CHEMA',N'Hoá học A','STEM','A')
INSERT INTO MONHOC VALUES('CHEMB',N'Hoá học B','STEM','B')
INSERT INTO MONHOC VALUES('CHEMC',N'Hoá học C','STEM','C')
INSERT INTO NGANH VALUES('SSCI',N'KH xã hội')
INSERT INTO MONHOC VALUES('HISTA',N'Lịch sử A','SSCI','A')
INSERT INTO MONHOC VALUES('HISTB',N'Lịch sử B','SSCI','B')
INSERT INTO MONHOC VALUES('HISTC',N'Lịch sử C','SSCI','C')
INSERT INTO MONHOC VALUES('GEOGA',N'Địa lý A','SSCI','A')
INSERT INTO MONHOC VALUES('GEOGB',N'Địa lý B','SSCI','B')
INSERT INTO MONHOC VALUES('GEOGC',N'Địa lý C','SSCI','C')
INSERT INTO MONHOC VALUES('GDCDA',N'Giáo dục công dân A','SSCI','A')
INSERT INTO MONHOC VALUES('GDCDB',N'Giáo dục công dân B','SSCI','B')
INSERT INTO MONHOC VALUES('GDCDC',N'Giáo dục công dân C','SSCI','C')

CREATE TABLE NAMHOC
(
	MaNH VARCHAR(6) PRIMARY KEY,
	NamBatDau INT NOT NULL,
	NamKetThuc INT NOT NULL,
)

INSERT INTO NAMHOC VALUES('NH0001',2022,2023)

CREATE TABLE LOAIHOCPHI
(
	MaLHP VARCHAR(4) PRIMARY KEY,
	TenLHP NVARCHAR(50) NOT NULL,
	DONGIA INT NOT NULL
)

CREATE TABLE HOCPHI
(
	MaHocPhi VARCHAR(10) PRIMARY KEY NOT NULL,
	MaNH VARCHAR(6) REFERENCES NAMHOC(MaNH) NOT NULL,
	MaHS VARCHAR(8) REFERENCES HOCSINH(MaHS) NOT NULL,
	MaLHP VARCHAR(4) REFERENCES LOAIHOCPHI(MaLHP) NOT NULL,
	DONGIA INT NOT NULL,
	NgayThongBao DATE NOT NULL,
	NgayDongTien DATE
)

CREATE TABLE CTHP
(
	MaCTHP VARCHAR(10) PRIMARY KEY,
	MaHS VARCHAR(8) REFERENCES HOCSINH(MaHS) NOT NULL,
	MaMH VARCHAR(5) REFERENCES MONHOC(MaMH) NOT NULL,
	MaNH VARCHAR(6) REFERENCES NAMHOC(MaNH) NOT NULL,
	MaGV VARCHAR(4) REFERENCES GIAOVIEN(MaGV) NOT NULL
)

INSERT INTO CTHP VALUES('HP00000001','HS000001','TOANA','NH0002','GV01')

CREATE TABLE KETQUA
(
	MaKQ VARCHAR(10) PRIMARY KEY,
	MaCTHP VARCHAR(10) REFERENCES CTHP(MaCTHP),
	DiemQT FLOAT NOT NULL,
	Diem1T FLOAT NOT NULL,
	DiemKT FLOAT NOT NULL,
	DiemTB FLOAT NOT NULL
)

